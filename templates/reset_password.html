<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reset Password | My Note</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Same styling as login & forgot-password for consistency */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #667eea, #764ba2); display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #333; padding: 20px; }
        .auth-container { display: flex; justify-content: center; align-items: center; gap: 40px; color: #fff; max-width: 1000px; width: 100%; flex-wrap: wrap; }
        .welcome-section { flex: 1 1 300px; min-width: 280px; text-align: center; margin-bottom: 20px; }
        .welcome-section h1 { font-size: 28px; margin-bottom: 15px; color: #fff; }
        .welcome-section p { font-size: 15px; color: #eee; line-height: 1.4; }
        .welcome-section .brand { color: #FFD700; font-weight: bold; }
        .form-section { background: #fff; color: #2C3E50; padding: 25px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.15); width: 100%; max-width: 350px; animation: fadeIn 0.8s ease-in-out; }
        .form-section h2 { margin-bottom: 20px; color: #764ba2; text-align: center; }
        .form-section input { display: block; width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 6px; font-size: 15px; color: #2C3E50; outline: none; transition: 0.3s ease; }
        .form-section input:focus { border-color: #667eea; box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
        .form-section button { width: 100%; padding: 12px; background: linear-gradient(135deg, #667eea, #764ba2); border: none; color: #fff; font-size: 16px; border-radius: 6px; cursor: pointer; transition: opacity 0.3s ease; }
        .form-section button:hover { opacity: 0.9; }
        .form-section a { color: #667eea; text-decoration: none; }
        .form-section a:hover { text-decoration: underline; }
        .alert { padding: 12px 16px; border-radius: 6px; margin-top: 15px; font-size: 14px; font-weight: 500; text-align: center; animation: fadeIn 0.4s ease-in-out; }
        .alert-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 768px) { .auth-container { flex-direction: column; gap: 20px; text-align: center; } .welcome-section { margin-bottom: 10px; } .welcome-section h1 { font-size: 24px; } }
    </style>
</head>
<body>
<div class="auth-container">
    <div class="welcome-section">
        <h1>Reset Your Password</h1>
        <p>Enter a new password to update your account.</p>
    </div>

    <div class="form-section">
        <h2>New Password</h2>
        <form action="/reset-password/{{ token }}" method="post">
            <input type="password" name="password" placeholder="New password" required>
            <input type="password" name="confirm_password" placeholder="Confirm new password" required>
            <button type="submit">Reset Password</button>
        </form>

        {% if msg %}
            <div id="alertBox"
                 class="alert {% if 'success' in msg.lower() or 'âœ…' in msg %}alert-success{% else %}alert-error{% endif %}">
                {{ msg }}
            </div>
        {% endif %}

        <p>Remembered your password? <a href="/login">Login here</a></p>
    </div>
</div>

<script>
    setTimeout(() => {
        const alertBox = document.getElementById("alertBox");
        if (alertBox) { alertBox.style.transition = "opacity 0.5s"; alertBox.style.opacity = "0"; setTimeout(() => alertBox.remove(), 500); }
    }, 4000);
</script>
</body>
</html>
